<style>
 .quandiv
{
    display: flex;
    width: 71px;
    border-radius: 4px;
    overflow: hidden;
    height: 26px;
    border-color: #DDD;
    border: 1px solid #DDD;
}
 .quandiv .minus
{
    padding: 0px 8px;
    border: 1px solid #ddd;
    align-items: center;
}
 .quandiv .qty
{
   width: 10px;
   font-size: 11px;
}
 .quandiv .plus
{
    padding: 0px 9px;
    border: 1px solid #ddd;
    align-items: center;
}
</style>
<div id="item_div_modal_pp" style="display:none;">


<table style="margin:0;padding: 0;
  background: #FFF;
  border:1px solid #eee; table-layout:fixed;"> 
        <tbody>
            <tr>
                <td>
    <table style="width: 100%;font-size: medium;">
        <tbody>
            <tr>
                
				<th colspan="2"><p  style="text-align:center;padding: 5px 2px;margin: 0; font-size: medium;">Lava Pub & Restaurant gh</p></th>
            </tr>
            <tr>
                <td><p style="padding: 5px 0px;margin: 0;">GST Number : GSTIN1234</p></td>
            </tr>
			<tr>
			<td><p style="padding: 5px 0px;margin: 0;">FSSAI Number : FSSAI-123456</p></td> 
		</tr>
        </tbody>
    </table> 
    
    <table style="width: 100%;font-size: medium;">
        <tbody>
            <tr>
                <td>Date : <span>30, Aug 23</span></td>
                <td style="text-align:right;">Time : <span>06:23 pm</span></td>
            </tr>
            <tr>
                <td>Table #: <span>Counter</span></td>
                <td style="text-align:right;">Order # : <span>103</span></td>
            </tr>
            <tr>
                <th colspan="2"><p  style="text-align:center;padding: 5px 2px;margin: 0; font-size: medium;">Original Receipt</p></th>
            </tr>
        </tbody>
    </table>
    
    <table style="width: 100%;font-size: 12px;">
        <thead>
            <tr>
                <th  style="width: 50%;text-align: left;font-size: 14px;text-transform: uppercase;border-top:1px solid black;border-bottom: 1px solid black;vertical-align: middle;">Item</th>
                <th style=" width: 5%;text-align: center;font-size: 14px;text-transform: uppercase;border-top:1px solid black;border-bottom: 1px solid black;vertical-align: middle;">Qty</th>
                <th style="width: 20%;text-align: center;font-size: 14px;text-transform: uppercase;border-top:1px solid black;border-bottom: 1px solid black;vertical-align: middle;">Rate</th>
                <th style="width: 25%;text-align: right;font-size: 14px;text-transform: uppercase;border-top:1px solid black;border-bottom: 1px solid black;vertical-align: middle;">Amount</th>
            </tr> 
        </thead>
       
        <tbody><tr>
	<td style="font-size: medium;text-align: left;vertical-align: bottom;padding: 3px 0px;width: 60%;min-width: 60%;max-width: 60%;word-break: break-all;">corn pizza</td>
	<td style="font-size: medium;text-align: center;vertical-align: bottom;padding: 3px 0px;">1</td>
	<td style="font-size: medium;text-align: center;vertical-align: bottom;padding: 3px 0px;">&#8377;99</td>
	<td style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;">&#8377;99</td> 
</tr><tr>
	<td style="font-size: medium;text-align: left;vertical-align: bottom;padding: 3px 0px;width: 60%;min-width: 60%;max-width: 60%;word-break: break-all;">Cheese pizza</td>
	<td style="font-size: medium;text-align: center;vertical-align: bottom;padding: 3px 0px;">1</td>
	<td style="font-size: medium;text-align: center;vertical-align: bottom;padding: 3px 0px;">&#8377;120</td>
	<td style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;">&#8377;120</td> 
</tr><tr> 
                <td colspan="3" style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;border-top:1px solid black !important;    padding-right: 12px;">Subtotal</td>
                <td style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;border-top:1px solid black !important;">&#8377;219.00</td>
            </tr>
			<tr>
			<td colspan="3" style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;    padding-right: 12px;">Discount(&#8377;)</td>
			<td style="text-align: right;font-size: medium;vertical-align: bottom;padding: 3px 0px;">&#8377;0.00</td>
		</tr>
			<tr>
			<td colspan="3" style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;    padding-right: 12px;">SCH(5%)</td>
			<td style="text-align: right;font-size: medium;vertical-align: bottom;padding: 3px 0px;">&#8377;10.95</td>
		</tr><tr>
                <td colspan="3" style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;    padding-right: 12px;">CGST(6%)</td>
                <td style="text-align: right;font-size: medium;vertical-align: bottom;padding: 3px 0px;">&#8377;13.80</td>
            </tr>
           <tr>
                <td colspan="3" style="font-size: medium;text-align: right;vertical-align: bottom;padding: 3px 0px;    padding-right: 12px;">SGST(6%)</td>
                <td style="text-align: right;font-size: medium;vertical-align: bottom;padding: 3px 0px;">&#8377;13.80</td>
            </tr>
           <tr>
                <th colspan="3" style="text-align: right;font-size: medium;    border-top: 1px dashed black !important;
    border-bottom: 1px dashed black !important;    padding-right: 12px;">Total</th>
                <th  style="text-align: right;font-size: medium;vertical-align: bottom;padding: 3px 0px;border-top: 1px dashed black !important;
    border-bottom: 1px dashed black !important;">&#8377;257.54</th>
            </tr>
        </tbody>
    </table>
    <table style="width: 100%;font-size: 12px;">
        <tbody><tr> 
                <td>
                <p style="text-align:center;padding: 5px 2px;margin: 0;">
            Thank you for your visit!
        </p>
                </td>
            </tr>
        </tbody>
    </table> 

    </td>
            </tr>
        </tbody> 
    </table>






</div>



<style>
.ordermdl
{
    right:0%;left: inherit;display:none;
    top: 0% !important;  
    border:0px !important;  height: 100vh;

}
.fade.in {
    opacity: 1;
}
.ordfooter
{
    position:fixed;
    bottom:0px;width:100%;text-align:left;
}
</style>
<div class="modal fade ordermdl" id="right-menu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" style="z-index:99999">
  <div class="modal-dialog modal-dialog-centered" role="document" data-bs-backdrop="static">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Order Details
		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
		

		</h5>
   
      </div>
      <div class="modal-body" id="item_div_modal" style=" position: relative;max-height: 82vh;padding: 0px 15px; overflow-y: auto;"> 
	


	
      </div>
      <div class="modal-footer ordfooter">
	    <!-- <button type="button" class="btn btn-primary send_order_notification" onclick="send_order_notification();">Save and Notify</button> -->
		<!--<button type="button" class="btn btn-info" onclick="printDiv_order()"> Print</button> -->
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>

<div class="modal fade ordermdl" id="right-menu2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" style="z-index:99999">
  <div class="modal-dialog modal-dialog-centered" role="document" data-bs-backdrop="static">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Order Details45
		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
		

		</h5>
   
      </div>
      <div class="modal-body" id="item_div_modal" style=" position: relative;max-height: 75vh;padding: 0px 15px; overflow-y: auto;"> 
	


	
      </div>
      <div class="modal-footer ordfooter">
	    
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>



</div>

</div>

<a href="#" id="btn-scroll-up"
	class="btn-scroll-up btn btn-small btn-inverse"> <i
	class="icon-double-angle-up icon-only bigger-110"></i>
</a>

<script type="text/javascript">
			window.jQuery || document.write("<script src='<?php echo SITE_URL.'/assets/fooders/js/jquery-2.0.3.min.js';?>'>"+"<"+"/script>");
		</script>

<script> 
$( document ).ready(function() {
	$('#myModal').modal();                      // initialized with defaults
	$('#myModal').modal({backdrop: 'static', keyboard: false });   // initialized with no keyboard
	$('#myModal').modal('show'); 
});
function closeModal () {
	$('#myModal').modal('hide'); 
	};
</script>
<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='<?php echo SITE_URL.'/assets/fooders/js/jquery.mobile.custom.min.js';?>'>"+"<"+"/script>");
		</script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/bootstrap.min.js'; ?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery-ui-1.10.3.custom.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.ui.touch-punch.min.js';?>"></script>
<!--ace scripts-->
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/ace-elements.min.js';?>"></script>
<script src="<?php echo SITE_URL.'/assets/fooders/js/ace.min.js';?>"></script>

<!--page specific plugin scripts-->
<!--[if lte IE 8]>
		  <script src="assets/js/excanvas.min.js"></script>
		<![endif]-->
<!-- ********************************* Dashboard Js Part ********************************************** -->
<?php if($query2ans=="dashboard"){?>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.easy-pie-chart.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/flot/jquery.flot.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/flot/jquery.flot.pie.min.js';?>"></script>
<script type="text/javascript">
			$(function() {
				$('.easy-pie-chart.percentage').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
					var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
					var size = parseInt($(this).data('size')) || 50;
					$(this).easyPieChart({
						barColor: barColor,
						trackColor: trackColor,
						scaleColor: false,
						lineCap: 'butt',
						lineWidth: parseInt(size/10),
						animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,
						size: size
					});
				})
			  var placeholder = $('#piechart-placeholder').css({'width':'90%' , 'min-height':'150px'});
			  var data = [
				{ label: "images", data: <?php echo fooder_current_images;?>, color: "#68BC31"},
				{ label: "menus/categories",  data: <?php echo fooder_current_menus;?>, color: "#2091CF"},
				{ label: "dishes/products",  data: <?php echo fooder_current_products;?>, color: "#AF4E96"},
				{ label: "delivery areas",  data: <?php echo fooder_selected_areas;?>, color: "#DA5430"},
				{ label: "other",  data: <?php echo $fooder_bar;?>, color: "#E7D82F"}
			  ]
			  function drawPieChart(placeholder, data, position) {
			 	  $.plot(placeholder, data, {
					series: {
						pie: {
							show: true,
							tilt:0.8,
							highlight: {
								opacity: 0.25
							},
							stroke: {
								color: 'transparent',
								width: 2
							},
							startAngle: 2
						}
					},
					legend: {
						show: true,
						position: position || "ne", 
						labelBoxBorderColor: null,
						margin:[-30,15]
					}
					,
					grid: {
						hoverable: true,
						clickable: true
					}
				 })
			 }
			 drawPieChart(placeholder, data);
			 /**
			 we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
			 so that's not needed actually.
			 */
			 placeholder.data('chart', data);
			 placeholder.data('draw', drawPieChart);
			  var $tooltip = $("<div class='tooltip top in hide'><div class='tooltip-inner'></div></div>").appendTo('body');
			  var previousPoint = null;
			  placeholder.on('plothover', function (event, pos, item) {
				if(item) {
					if (previousPoint != item.seriesIndex) {
						previousPoint = item.seriesIndex;
						var tip = item.series['label'] + " : " + Math.round(item.series['percent'])+'%';
						$tooltip.show().children(0).text(tip);
					}
					$tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$tooltip.hide();
					previousPoint = null;
				}
			 });
			});
		$('[data-rel=tooltip]').tooltip();
		$('[data-rel=popover]').popover({html:true});	
		</script>
<?php
}
if ($query2ans == "fooders_cp" || $query2ans == "products" || $query2ans == "image_gallery" || $query2ans == "menu" || $query2ans == "account_management" 
|| $query2ans == "edit_delivery_guy" || $query2ans == "add_delivery_guy" || $query2ans == "live_orders" || $query2ans == "verification" 
|| $query2ans == "add_offer" || $query2ans == "edit_offer" || $query2ans == "offers" || $query2ans == "manage_tables" || $query2ans == "payments" 
|| $query2ans == "qrcode_settings" || $query2ans == "online_ordering") {
	?>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/chosen.jquery.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/date-time/bootstrap-datepicker.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/date-time/bootstrap-timepicker.min.js';?>"></script> 
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/bootstrap-colorpicker.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.autosize-min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/bootstrap-tag.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.inputlimiter.1.3.1.min.js';?>"></script>
<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.gritter.min.js';?>"></script>

<script
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.colorbox-min.js';?>"></script>

<script src="<?php echo SITE_URL.'/assets/fooders/js/bootbox.min.js';?>"></script>
<script type="text/javascript">
			$(function() {
	var colorbox_params = {
		reposition:true,
		scalePhotos:true,
		scrolling:false,
		previous:'<i class="icon-arrow-left"></i>',
		next:'<i class="icon-arrow-right"></i>',
		close:'&times;',
		current:'{current} of {total}',
		maxWidth:'100%',
		maxHeight:'100%',
		onOpen:function(){
			document.body.style.overflow = 'hidden';
		},
		onClosed:function(){
			document.body.style.overflow = 'auto';
		},
		onComplete:function(){
			$.colorbox.resize();
		}
	};
	$('.ace-thumbnails [data-rel="colorbox"]').colorbox(colorbox_params);
	$("#cboxLoadingGraphic").append("<i class='icon-spinner orange'></i>");//let's add a custom loading icon
})
		</script>
<script type="text/javascript">
			$(function() {
				$('.gritter-close').click(function(){
	                 $('#gritter-notice-wrapper').hide('slow');
					});
			});
		</script>
<script type="text/javascript">
			$("#change").click(function(){
					$(".hidedropdown").show(500);
				});
		</script>
<script type="text/javascript">
			$(function() {
				$(".chzn-select").chosen(); 
				$('[data-rel=tooltip]').tooltip({container:'body'});
				$('[data-rel=popover]').popover({container:'body'});
				$('textarea[class*=autosize]').autosize({append: "\n"});
				$('textarea[class*=limited]').each(function() {
					var limit = parseInt($(this).attr('data-maxlength')) || 1000;
					$(this).inputlimiter({
						"limit": limit,
						remText: '%n character%s remaining...',
						limitText: 'max allowed : %n.'
					});
				});
//*************************** Simple Choose File ***********************************************			
				$('#id-input-file-1 , #id-input-file-2').ace_file_input({
					no_file:'No File ...',
					btn_choose:'Choose',
					btn_change:'Change',
					droppable:false,
					onchange:null,
					thumbnail:false //| true | large
					//whitelist:'gif|png|jpg|jpeg'
					//blacklist:'exe|php'
					//onchange:''
					//
				});
//******************************** Simple choose file end **************************************
//************************************* Image Gallery File Upload ******************************				
				$('#id-input-file-3').ace_file_input({
					style:'well',
					btn_choose:'Drop images here or click to choose ! File type allowed : jpg, jpeg, png',
					btn_change:null,
					no_icon:'icon-picture',
					droppable:true,
					thumbnail:'small'
					//,icon_remove:null//set null, to hide remove/reset button
					,before_change:function(files, dropped) {
						var allowed_files = [];
						for(var i = 0 ; i < files.length; i++) {
							var file = files[i];
							if(typeof file === "string") {
								//IE8 and browsers that don't support File Object
								if(! (/\.(jpe?g|png|gif|bmp)$/i).test(file) ) return false;
							}
							else {
								var type = $.trim(file.type);
								if( ( type.length > 0 && ! (/^image\/(jpe?g|png|gif|bmp)$/i).test(type) )
										|| ( type.length == 0 && ! (/\.(jpe?g|png|gif|bmp)$/i).test(file.name) )//for android's default browser which gives an empty string for file.type
									) continue;//not an image so don't keep this file
							}
							
							allowed_files.push(file);
						}
						if(allowed_files.length == 0) return false;
		
						return allowed_files;
						return true;
					}
					/**,before_remove : function() {
						return true;
					}*/
					,
					preview_error : function(filename, error_code) {
						//name of the file that failed
						//error_code values
						//1 = 'FILE_LOAD_FAILED',
						//2 = 'IMAGE_LOAD_FAILED',
						//3 = 'THUMBNAIL_FAILED'
						//alert(error_code);
					}
			
				}).on('change', function(){
					//console.log($(this).data('ace_input_files'));
					//console.log($(this).data('ace_input_method'));
				});
//*************************************** End Image gallery Upload file ***********************************
					$('.date-picker').datepicker().next().on(ace.click_event, function(){
					$(this).prev().focus();
				});
//********************************** Timepicker For Hours Of Operation Start *******************************
				$('#timepicker1').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker2').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker3').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker4').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker5').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker6').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker7').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker8').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker9').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker10').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker11').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker12').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker13').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
				$('#timepicker14').timepicker({
					minuteStep: 1,
					showSeconds: false,
					showMeridian: false
				})
	//********************************** Timepicker For Hours Of Operation End*******************************			
				$('#colorpicker1').colorpicker();
				$('#simple-colorpicker-1').ace_colorpicker();

			   var tag_input = $('#form-field-tags');
				if(! ( /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase())) ) 
					tag_input.tag({placeholder:tag_input.attr('placeholder')});
				else {
					//display a textarea for old IE, because it doesn't support this plugin or another one I tried!
					tag_input.after('<textarea id="'+tag_input.attr('id')+'" name="'+tag_input.attr('name')+'" rows="3">'+tag_input.val()+'</textarea>').remove();
					//$('#form-field-tags').autosize({append: "\n"});
				}
 		});
		</script>
<?php
}
if ($query2ans == "view_products" || $query2ans == "view_menus" || $query2ans == "orders" || $query2ans == "delivery_guys") {
	?>
<script type="text/javascript"
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.dataTables.min.js'?>"></script>
<script type="text/javascript"
	src="<?php echo SITE_URL.'/assets/fooders/js/jquery.dataTables.bootstrap.js'?>"></script>
<script type="text/javascript">
			$(function() {
		//******************** for delivery areas in fooders_cp ***********************		
				var oTable1 = $('#sample-table-2').dataTable( {
				"aoColumns": [
			      { "bSortable": false },
			      null, null,
				  { "bSortable": false }
				] } );
        //********************** for products_listall ***************************
				var oTable2 = $('#sample-table-3').dataTable( {
					"aoColumns": [
				      { "bSortable": false },
				      null, null, null,null,null,null,null, 
					  { "bSortable": false }
					] } );
        //*********************** for view menu *********************************
				var oTable3 = $('#sample-table-4').dataTable( {
					"aoColumns": [
				      { "bSortable": false },
				      null, null,   
					  { "bSortable": false }
					] } );
		//*************************** for orders *********************************			
				var oTable4 = $('#sample-table-5').dataTable( {
					"aaSorting": [[0, 'desc']],
				
					 } );
		//************************** table define end ****************************		
				$('table th input:checkbox').on('click' , function(){
					var that = this;
					$(this).closest('table').find('tr > td:first-child input:checkbox')
					.each(function(){
						this.checked = that.checked;
						$(this).closest('tr').toggleClass('selected');
					});
				});
				$('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});
				function tooltip_placement(context, source) {
					var $source = $(source);
					var $parent = $source.closest('table')
					var off1 = $parent.offset();
					var w1 = $parent.width();
					var off2 = $source.offset();
					var w2 = $source.width();
					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}
			});
		$(".productStatus").change(function(){
          var productid = $(this).attr('id');
		  
		  if($(this).prop('checked')==true){
			var stval = '<?php echo $feature->encrypt_decrypt('encrypt','1'); ?>';  
		  }else{
			var stval = '<?php echo $feature->encrypt_decrypt('encrypt','0'); ?>'; 
		  }
		  $.ajax({
		        type: 'POST',
		        url: '<?php echo $link->link('post',fooders);?>',
		        async: true, /* If set to non-async, browser shows page as "Loading.."*/
	            cache: false,
			    data: "changeProductStatus="+stval+"&pid="+productid,
		        success: function (data) {
		        	
		            }
		     });	
		});

		</script>
<?php
}
?>
<script type="text/javascript" charset="utf-8">
    function addmsg(type, msg){
        /* Simple helper to add a div.
        type is the name of a CSS class (old/new/error).
        msg is the contents of the div */
        $(".purple").html(msg);
    }

    function waitForMsg(){
        /* This requests the url "msgsrv.php"
        When it complete (or errors)*/ 
        $.ajax({
            type: "POST",
            url: "<?php echo $link->link('post&fooderid='.$fooder_id,fooders);?>",

            async: true, /* If set to non-async, browser shows page as "Loading.."*/
            cache: false,
            timeout:50000, /* Timeout in ms */

            success: function(data){ /* called when request to barge.php completes */
                addmsg("new", data); /* Add response to a .msg div (with the "new" class)*/
                setTimeout(
                    waitForMsg, /* Request next message */
                    5000 /* ..after 1 seconds */
                );
                
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                addmsg("error", textStatus + " (" + errorThrown + ")");
                setTimeout(
                    waitForMsg, /* Try again after.. */
                    15000); /* milliseconds (15seconds) */
            }
        });
    };

    $(document).ready(function(){
        //waitForMsg(); /* Start the inital request */
    });
   
	

	$(".status-completed").click(function(){
		var status = $(this).text();
		var orderid = $(this).attr("id");
		
		 $.ajax({
		        type: 'POST',
		        url: '<?php echo $link->link('post',fooders,'&st_completed=');?>'+status+'___'+orderid,
		        async: true, /* If set to non-async, browser shows page as "Loading.."*/
	            cache: false,
			    data: $(this).serialize(),
		        dataType: 'json',
		        success: function (data) {
		        	
		        	window.location="";
		        	
		            }
		     });	
		
		});

	$(".status-cancelled").click(function(){
		var status = $(this).text();
		var orderid = $(this).attr("id");
		
		 $.ajax({
		        type: 'POST',
		        url: '<?php echo $link->link('post',fooders,'&st_cancelled=');?>'+status+'___'+orderid,
		        data: $(this).serialize(),
		        dataType: 'json',
		        success: function (data) {
		        	
		        	window.location="";
		        	
		            }
		     });	
		
		});

	$(".status-inprocess").click(function(){
		var status = $(this).text();
		var orderid = $(this).attr("id");
		
		 $.ajax({
		        type: 'POST',
		        url: '<?php echo $link->link('post',fooders,'&st_inprocess=');?>'+status+'___'+orderid,
		        data: $(this).serialize(),
		        dataType: 'json',
		        success: function (data) {
		        	
		        	window.location="";
		            }
		     });	
		
		});
	<?php if($query2ans=='account_management' || $query2ans=='add_delivery_guy' || $query2ans=='edit_delivery_guy' || $query2ans=='fooders_cp'){ ?> 
  $("#fooderMobile").keypress(function (e) {

        //$("#fooderMobile").attr("min", "10");
            var valueLength = this.value.length;
            if (valueLength == 10) {
                return false;
            }
            var kk = e.which; 
            if (kk < 48 || kk > 57)
                e.preventDefault();
    });
	$(".landLine").keypress(function (e) {
	var valueLength = this.value.length;
	if (valueLength == 11) {
		return false;
	}
	var kk = e.which;
	if (kk < 48 || kk > 57)
		e.preventDefault();
});


$("#upi_address").blur(function () {
$("#upi_error").html();
 var str1=$(this).val();

 if(str1!='')
 {
	var res=isValid_UPI_ID(str1);
	//alert(res);
	if(res=="false")
	{
		$("#upi_error").show();
		$('#upi_address').val("");
		$('#upi_error').html('<font class="red">Enter Correct UPI</font>');
		setTimeout(function(){$("#upi_error").html('');}, 5000);
	}
 }


	

	function isValid_UPI_ID(upi_Id) {
    // Regex to check valid
    // upi_Id
	//alert('fff'+upi_Id); 
   // let regex = new RegExp(/^[a-zA-Z0-9.-]*@[a-zA-Z][a-zA-Z]$/);

	var result = /^[\w.-]+@[\w.-]+$/.test(upi_Id);

    // upi_Id 
    // is empty return false 
    if (upi_Id == null) {
        return "false";
    } 
 
    // Return true if the upi_Id
    // matched the ReGex
    if (result == true) { 
        return "true";
    }
    else {
	
        return "false";
	

		
    }
}



});




	<?php } ?>
	
    </script> 



<script> 

<?php if($query2ans=='live_orders'){?>

function load_items(fooder_id)
   	{
		//alert('ffffffff');
   	    var currency='<?php echo $currency_symbol; ?>';
   	     const dbParam={'load_live_orders':'load_live_orders','fooder_id':fooder_id};
                              
                   const xmlhttp = new XMLHttpRequest();
                        xmlhttp.onload = function() {
                     const myObj = JSON.parse(this.responseText);
                
                  if(myObj!=""){

					
                     let new_order_text="";
					 let accepted_order_text=""; 
					 let ready_order_text="";
                  
					 for (let x in myObj) {

						var id=myObj[x].id;
						var order_id=myObj[x].order_id;
                        var created_date=myObj[x].created_date;
						var client_name=myObj[x].client_name;
                        var client_phone=myObj[x].client_phone;
						var order_amount=myObj[x].order_amount;
						var status_label=myObj[x].status_label;
						var payment_type=myObj[x].payment_type;
						var payment_status=myObj[x].payment_status;
						var payment_status_label=myObj[x].payment_status_label;
						var table_number=myObj[x].table_number;

if(myObj[x].status==0 || myObj[x].status==1){
new_order_text += `<div class="row-fluid">`; 
if(myObj[x].status==0){
new_order_text +=`<div class="span12 well well-sm well_div_`+id+`" >`;
}else{
	new_order_text +=`<div class="span12 well well-sm well_div_`+id+`" >`;
}
new_order_text +=`<div class="span2 "><h2 class="red smaller lighter"><b>`+order_id+`</b></h2>`+created_date+`
<div id="table_number_`+id+`">`+table_number+`</div>
<div id="payment_status_label_`+id+`">`+payment_status_label+`</div> 
</div>

<div class="span2 text-center">
<div id="status_label_`+id+`">`+status_label+`</div>
</div>


<div class="span2 text-center"><h4 class="blue smaller lighter"> `+client_name+`</h4><i class="icon-mobile-phone"></i> `+client_phone+`</div>
<div class="span2 text-center"><h3><b class="red text-large">`+currency+order_amount+`</b></h3></div>
<div class="span4 text-center"><button data-backdrop="static" data-keyboard="false" type="button" onclick="loadorder_details(`+id+`)" class="btn btn-mini btn-primary"> Details</button></div> 

</div> 
`; 
}

                      
                     }

					 document.getElementById("new_order_div_notification").innerHTML = new_order_text;
					 //document.getElementById("new_order_div").innerHTML = new_order_text;
					// document.getElementById("accepted_order_div").innerHTML = accepted_order_text;
					// document.getElementById("ready_order_div").innerHTML = ready_order_text;
					 
                  }else{
                      
                      //document.getElementById("table_div").style.display = 'none';
                  }
                   }
                   xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam));
   	} 

   $(document).ready(function(){


  load_items('<?php echo $fooder_id; ?>'); 


//   setTimeout(alert('ddd'), 10000);
 


   }); 

<?php }?>

   //setInterval(function(){
	//load_items('<?php echo $fooder_id; ?>'); 
	//playSound();
	//call_water('<?php echo $fooder_id; ?>');
  // }, 5000);
 

   
 function loadorder_details(id,fooder_id)
   	{

var currency='<?php echo $currency_symbol; ?>';
var oid=id;
var fooder_id='<?php echo $fooder_id; ?>'

const dbParam1={'load_order_details':'load_order_details','fooder_id':fooder_id,'order_id':oid};
                              
							  const xmlhttp = new XMLHttpRequest();
								xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText);
								//alert(this.responseText);
							    var items=myObj.items;
								var dg=myObj.dg;
								const tax_details = JSON.parse(myObj.tax_details);
								const service_charge_details = JSON.parse(myObj.service_charge_details); 
								var fooder_products= myObj.fooder_products;
								var discount_type=myObj.discount_type;
								var discount_rate=myObj.discount_rate;
								var eater_suggestions=$.trim(myObj.eater_suggestions);
								
								//alert(eater_suggestions)
						
//$("#right-menu").modal('show');  
$('#right-menu').modal({backdrop: 'static', keyboard: false}, 'show');

var odiv="";

var code=`<div class="row-fluid">
								<div class="span12">
									<div class="widget-box transparent invoice-box">
										<div class="widget-header widget-header-large">
										<input type="hidden" id="order_id" value="`+myObj.id+`">
											<h2><b class=" lighter pull-left position-relative">`+myObj.order_id+`</b></h2>
											<b id="status_label_div">`+myObj.status_label+`</b>
											<a href="#" onclick="printDiv_order(`+myObj.id+`)"
												return false;">
												<i class="icon-print" style="font-size:16px;" ></i> Print Bill
												</a>
												<a href="#" onclick="printDiv_kot(`+myObj.id+`)"
												return false;">
												<i class="icon-print" style="font-size:16px;" ></i> Print KOT
												</a>
											
											</div>  

										<div class="widget-body">
											<div class="widget-main">
												<div class="row-fluid">
													<div class="row-fluid">
													

														<div class="span6">
															<div class="row-fluid">
																<div class="span12 label label-large label-success arrowed-in arrowed-right">
																	<b>Customer</b>
																</div>
															</div>

															<div class="row-fluid">
															<h5>
															Name: `+myObj.client_name+`<br>Phone: <b class="red">`+myObj.client_mobile+`</b>
															<br><b class="blue" id="table_number">`+myObj.table_number+`</b>
															</h5>
															
															</div>
														</div>`;


														code+=`<div class="span6">`; 

														//code+=`<label >Change Status</label>`;

code+=`<select style="width: 100%;" class="form-control" id="status_id" onchange="change_status()">`; 

	code+=`<option value="0">Change Status</option>`;
	code+=`<option value="1"><?php echo $order_status_array['1']; ?></option>`;

if(myObj.status_order_ready_enable=='1')
{ 
	code+=`<option value="2"><?php echo $order_status_array['2']; ?></option>`;
 } 
	code+=`<option value="4"><?php echo $order_status_array['4']; ?></option>`;



	

	
/*if(myObj.status==0)
{
	code+=`<option value="0">Select</option>`;
	code+=`<option value="1"><?php echo $order_status_array['1']; ?></option>`;
	code+=`<option value="4"><?php echo $order_status_array['4']; ?></option>`;

}
if(myObj.status==1)
{
	code+=`<option value="1">Select</option>`;
	code+=`<option value="2"><?php echo $order_status_array['2']; ?></option>`;

}
if(myObj.status==2)
{
	code+=`<option value="2">Select</option>`;
	code+=`<option value="3"><?php echo $order_status_array['3']; ?></option>`;

}*/

code+=`</select>


</div>`;



								/*code+=`<div class="span6" id="delivery_guy_div">`;

										if(myObj.delivery_guy.name!=undefined){
												
												code+=`	Delivery Person<div class="row-fluid">
																<div class="span12 label label-large label-warning arrowed-in arrowed-right">
																	<b>`+myObj.delivery_guy.name+`</b>
																</div>
															</div>

															<div class="row-fluid">
																<ul class="unstyled spaced">
																	<li>
																	<i class="icon-caret-right green"></i>
																		Phone: <b class="red">`+myObj.delivery_guy.phone_number+`</b>		
																	</li>
                                                                 </ul>
															</div>`
												
												;
											}

											code+=`</div>`;*/





											code+=`</div>

													<div class="space"></div>`;
												



code+=`<div class="row-fluid">
<p id="paid_msg" class="text-medium"></p>
						<table class="table table-striped table-bordered">
															<thead>
																<tr>
																	<th class="center">#</th>
																	<th>Product</th>
																	<th>Quantity</th>
																	<th>Price</th>
																	<th>Total</th>
																	<th></th>
																</tr>
															</thead>

															<tbody>`;
var sn=1;
var subtotal=0;
															for (let x in items){	
															var price=items[x]['product_price'];
															if(items[x]['product_proprice']!='')
															{
																price=items[x]['product_proprice'];
															}

															subtotal=subtotal+(items[x]['quantity']*price);
															code+=`<tr>
																
																	<td class="center">`+sn+`</td>
                                                                    <td>`+items[x]['product_name']+`</td>
																
                                                                    <td>
                                                                         <div class="quandiv">
                                                                            <input type="button" value="-" class="minus" onclick="minus_quantity(`+items[x]['id']+`);">
                                                                            <input type="text" name="quantity" value="`+items[x]['quantity']+`" title="Qty" class="qty" size="4" readonly>
                                                                            <input type="button" value="+" class="plus" onclick="plus_quantity(`+items[x]['id']+`);">
                                                                        </div>
                                                                    </td>
																	<td>`+currency+``+price+`</td>
																	<td>`+currency+``+items[x]['quantity']*price+`</td>
																	<td><i class="icon-trash bigger-130" title="delete" onclick="remove_order_item(`+items[x]['id']+`);"></i></td>
																</tr>`;
																sn++;
															}	
															
													


										code+=`</tbody>
														</table>
													</div>`;	
													if(myObj.status==1)
															{
														code+=`<div class="row-fluid">
															<div class="span12 pull-right">
															<button type="button"  class="btn btn-mini btn-primary  send_order_notification" onclick="send_order_notification();">Update Order</button>
															</div>
															</div>`;
															}
														code+=`<div class="row-fluid">
														<div class="span12 pull-left">
														
														<form class="form-inline" id="add_item_form" method="post" action="">
														<h4>Add New Items</h4>
														
													<b>Items:</b> 
														<select class="input-small js-example-basic-single" onchange="choose_product()" id="choose_product_id" style="width: 30%;">
															<option value="">Select Items</option>`; 
															for (let x in fooder_products){	
																var price=fooder_products[x]['price'];
																if(fooder_products[x]['proprice']!='')
																{
																	price=fooder_products[x]['proprice'];
																}
																var product_number=fooder_products[x]['name'];
																var product_id=fooder_products[x]['id'];
                                                                 code+=`<option data-price="`+price+`" value="`+product_id+`">`+product_number+`</option>`;
																
																//sn++;
															}	





													
															code+=`</select>

														<input type="hidden" class="input-small price_id" placeholder="price" readonly style="width: 15%;" >
														<b>Qty:</b> <input type="text" class="input-small" id="quantity_id" min="1" value="1" onkeyup="choose_quantity()" style="width: 10%;">
														<input type="text" class="input-small row_total_id" readonly style="width: 15%;">
														

														<button type="button" onclick="add_form_submit();" class="btn btn-mini btn-purple">Add</button> 
													</form>
													   </div>
													
													</div>


													<div class="hr hr8 hr-double hr-dotted"></div>
													<div class="row-fluid">
														<div class="span12 pull-right">
														<b class="pull-right">
																Subtotal :  
																<span class="red">`+currency+``+subtotal.toFixed(2)+`</span>
															</b>
														</div>
													</div>`;
var discount=0.00;
var dt=currency;
if(discount_type==0 && discount_rate>0)
{
	var discount=(parseFloat(subtotal.toFixed(2))*parseFloat(discount_rate))/100;
	dt=discount_rate+'%';
}
else if(discount_type==1 && discount_rate>0)
{
	var discount=parseFloat(discount_rate);
	dt=currency;
}
												
var after_discount_amount=0.00;
after_discount_amount=parseFloat(subtotal.toFixed(2))-parseFloat(discount); 

if(discount.toFixed(2)>0){
code+=`
<div class="row-fluid">
	<div class="span12 pull-right">
	<b class="pull-right">
	Discount(`+dt+`) :  
			<span class="red">`+currency+``+discount.toFixed(2)+`</span>
		</b>
	</div>
	</div>`;
}
	/*code+=`
<div class="row-fluid">
	<div class="span12 pull-right">
	<b class="pull-right">
	After discount amount :  
			<span class="red">`+currency+``+after_discount_amount.toFixed(2)+`</span>
		</b>
	</div>
	</div>`;*/






													var delivery_charge=0;
													if(myObj.order_mode==1){
														delivery_charge=myObj.delivery_charge;
													code+=`<div class="row-fluid">
														<div class="span12 pull-right">
															<h5 class="pull-right">
																Delivery Charge :  
																<span class="red">`+currency+``+delivery_charge.toFixed(2)+`</span>
															</h5>
														</div>
													</div>`;
													
													}
													var service_charge=0;
													if(service_charge_details['name']!=""){
													service_charge=(after_discount_amount*service_charge_details['percentage'])/100;
													code+=`<div class="row-fluid">
														<div class="span12 pull-right">
															<b class="pull-right">
															`+$.trim(service_charge_details['name'])+`(`+service_charge_details['percentage']+`%) : 
																<span class="red">
																`+currency+``+service_charge.toFixed(2)+` 		 														
																</span>
															</b>
														</div>
													</div>`;
												
													}
taxable_amount=parseFloat(after_discount_amount)+parseFloat(service_charge);
var total_tax=0; 
													for (let x in tax_details){	

														var tax_amount=(taxable_amount*tax_details[x]['percentage'])/100;	
														total_tax=total_tax+tax_amount;
if(tax_details[x]['percentage']>0){
													code+=`<div class="row-fluid">
														<div class="span12 pull-right">
															<b class="pull-right">
															`+tax_details[x]['name']+`(`+tax_details[x]['percentage']+`%) : 
																<span class="red">
																`+currency+``+tax_amount.toFixed(2)+` 		 														
																</span>
															</b>
														</div>
													</div>`;
}
													}

var order_amount=0; 

order_amount=parseFloat(after_discount_amount)+parseFloat(total_tax)+parseFloat(service_charge)+parseFloat(delivery_charge); 
													
													code+=`
													<div class="row-fluid">
														<div class="span5 pull-right">
														
															<h4 class="pull-right">
																Total Amount :	<span class="red">`+currency+``+order_amount.toFixed(2)+`</span> 
															</h4>
														</div>
													<div class="span7 pull-left">
													<b class="pull-left" id="payment_status_label_div">`+myObj.payment_type+`
													
												
													
													
													</b>

													
													</div>
													</div>`;



													
code+=`<div class="row-fluid">
														<div class="span12 pull-left">
														<p id="discount_msg"></p>
														<form class="form-inline" id="add_discount_form" method="post" action="">
														<h4>Apply Discount</h4>
														
												
														<select class="input-small" id="discount_type" style="width: 10%;">
															<option value="percent">%</option>
															<option value="amount">`+currency+`</option>
															</select> 

													
														<input type="text" class="input-small" id="discount_id"  value="" style="width: 20%;">
														
														

														<button type="button" onclick="discount_form_submit();" class="btn btn-mini btn-danger">Apply</button> 
													</form>
													   </div> 
													
													</div>`;

if(eater_suggestions!=""){
code+=`<hr>
<div class="row-fluid">
	<div class="span12">

	<h5><strong>Eater Suggestions : </strong></h5> 
			<p>`+eater_suggestions+`</p>
	
	</div>
	</div>`;
}

code+=`<div class="hr hr8 hr-double hr-dotted"></div>
													
													
													<p id="status_div_msg"></p>
													`; 
												
	                                                 code+=`<div class="row-fluid">
		                                          `;

if(myObj.payment_status==0)
{
code+=`<div class="span4"> 
   <label >Mark as paid</label>`;

code+=`<select style="width: 100%;" class="form-control" id="payment_type_id" onchange="change_payment_type()">`; 
    code+=`<option value="">Select</option>`;
	code+=`<option value="cash">Cash</option>`;
	code+=`<option value="card">Card</option>`;
	code+=`<option value="upi">UPI</option>`;
code+=`</select></div>`;
}													
	

code+=`<div class="span4"> 
   <label >Change Table</label>`;

code+=`<select style="width: 100%;" class="form-control" id="table_id" onchange="change_table()">`; 
    code+=`<option value="">Select</option>
<?php
if(is_array($fooders_tables))
{ foreach($fooders_tables as $ftrow){
	echo '<option value="'.$ftrow['id'].'">'.$ftrow['table_no'].'</option>';
}

}

?>
</select></div>`;

															
code+=`</div>`;



								if(myObj.order_mode==1){
															code+=`<div class="row-fluid"><div class="span12">
													
															<label>Assign Delivery Person</label>

															<select class="form-control" id="delivery_guy_id" onchange="change_dg()">
															<option value="0">Select</option>
															<?php
															if(is_array($all_dg))
															{ foreach($all_dg as $dgrow){
                                                              echo '<option value="'.$dgrow['id'].'">'.$dgrow['name'].'</option>';
															}

															}
															
															?>
																</select>
													             </div></div>`;
											
														}

												

											
													
	
												code+=`</div>
										</div>
									</div>
								</div>
							</div>`;
				
document.getElementById("item_div_modal").innerHTML = code;


// if(myObj.delivery_guy.id!=undefined){
// //document.getElementById("delivery_guy_id").value = myObj.delivery_guy.id;
// }else{
// 	//document.getElementById("delivery_guy_id").value = 0;
// }
document.getElementById("status_id").value = myObj.status;
document.getElementById("table_id").value = myObj.table_id;


							  }

		     xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam1));

	}

function plus_quantity(id)
{ 
//alert(id);
document.getElementById("paid_msg").innerHTML ='';
var oid=document.getElementById('order_id').value;
var fooder_id='<?php echo $fooder_id; ?>'


const dbParam1={'add_item_quantity_to_order':id,'order_id':oid,'fooder_id':fooder_id};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								//alert('success');

								document.getElementById("paid_msg").innerHTML =myObj.msg;
												setTimeout(function(){loadorder_details(oid,fooder_id);}, 3000);
								}else{
									document.getElementById("paid_msg").innerHTML =myObj.msg;
								} 
							    }

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));


}

function minus_quantity(id)
{ 
//alert(id);
document.getElementById("paid_msg").innerHTML ='';
var oid=document.getElementById('order_id').value;
var fooder_id='<?php echo $fooder_id; ?>'


const dbParam1={'minus_item_quantity_to_order':id,'order_id':oid,'fooder_id':fooder_id};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								//alert('success');

									document.getElementById("paid_msg").innerHTML =myObj.msg;
												setTimeout(function(){loadorder_details(oid,fooder_id);}, 3000);
								} else{
									document.getElementById("paid_msg").innerHTML =myObj.msg;
								} 
							    }

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));


}



function choose_product()
{ 
	var pid=$("#choose_product_id").val();
	var price=$("#choose_product_id option[value='"+pid+"']").attr("data-price");  
	var quantity=$("#quantity_id").val();
	if(quantity>0)
	{
		
		$(".price_id").val(price);
	    $(".row_total_id").val(price*quantity); 
	}else{
		$(".price_id").val(0);
	    $(".row_total_id").val(0); 
	}


}
function choose_quantity()
{ 
	var currency='<?php echo $currency_symbol; ?>';
	var pid=$("#choose_product_id").val();

if(pid!='')
{
	var price=$("#choose_product_id option[value='"+pid+"']").attr("data-price");  
	var quantity=$("#quantity_id").val();

	if(price=="")
	{
		price=0;
	}
if(quantity>0){
	$(".price_id").val(price);
	$(".row_total_id").val(price*quantity); 
}else{
	$(".price_id").val(0);
	$(".row_total_id").val(0); 
}
	

}else{
	$(".row_total_id").val(parseFloat(0).toFixed(2)); 
}

	
}



 

function add_form_submit()
{
	document.getElementById("paid_msg").innerHTML ='';
var oid=document.getElementById('order_id').value;
var qty=document.getElementById('quantity_id').value;
var pid=document.getElementById('choose_product_id').value;
var fooder_id='<?php echo $fooder_id; ?>'

const dbParam1={'add_item_to_order':oid,'quantity_id':qty,'product_id':pid};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								//alert('success');

								document.getElementById("paid_msg").innerHTML =myObj.msg;
								setTimeout(function(){loadorder_details(oid,fooder_id);}, 3000);
								}else{
									document.getElementById("paid_msg").innerHTML =myObj.msg;
								} 
							    } 

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));


}

function discount_form_submit()
{
	document.getElementById("paid_msg").innerHTML ='';
var oid=document.getElementById('order_id').value;
var discount_id=document.getElementById('discount_id').value;
var discount_type=document.getElementById('discount_type').value;
var fooder_id='<?php echo $fooder_id; ?>';

const dbParam1={'apply_discount_to_order':oid,'discount_id':discount_id,'discount_type':discount_type};

//alert(JSON.stringify(dbParam1));
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								//alert('success');

								document.getElementById("discount_msg").innerHTML =myObj.msg;
								setTimeout(function(){loadorder_details(oid,fooder_id);}, 3000);
								}else{
									document.getElementById("discount_msg").innerHTML =myObj.msg;
								} 
							    } 

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));


}

function remove_order_item(id)
{

	if (confirm("Are you sure want to remove!") == true) {
    	//alert(id);
				var oid=document.getElementById('order_id').value;
				var fooder_id='<?php echo $fooder_id; ?>'
				const dbParam1={'remove_order_item':id,'order_id':oid,'fooder_id':fooder_id};
				const xmlhttp = new XMLHttpRequest();
				xmlhttp.onload = function() {
												const myObj = JSON.parse(this.responseText); 
										
												if(myObj.error==false)
												{
													document.getElementById("paid_msg").innerHTML =myObj.msg;
												setTimeout(function(){loadorder_details(oid,fooder_id);}, 3000);
												
												
												}else{
													document.getElementById("paid_msg").innerHTML =myObj.msg;
												} 
												}
				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));
  }



}

function send_order_notification()
{ 
//alert('==');
document.getElementById("paid_msg").innerHTML ='';
var oid=document.getElementById('order_id').value;
var fooder_id='<?php echo $fooder_id; ?>';
$(".send_order_notification").html('Proccess..');



const dbParam1={'send_notification_add_order_item':'yes','order_id':oid,'fooder_id':fooder_id};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								//alert('success');

								loadorder_details(oid,fooder_id);
								$(".send_order_notification").html('Save and Notify');
								}else{
									document.getElementById("paid_msg").innerHTML =myObj.msg;
									$(".send_order_notification").hide();
								} 
							    }

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));


}







function change_status()
{
var oid=document.getElementById('order_id').value;
var sid=document.getElementById('status_id').value;
document.getElementById("paid_msg").innerHTML ='';

const dbParam1={'change_status':'change_status','order_id':oid,'status':sid};
                              
							  const xmlhttp = new XMLHttpRequest();
								xmlhttp.onload = function() 
								{
								const myObj = JSON.parse(this.responseText); 
						


								//alert(myObj.msg);
								if(myObj.error==false) 
								{
									document.getElementById("status_label_div").innerHTML = '<i class="fa fa-spin spinner"></i>';
					
									document.getElementById("status_label_div").innerHTML = myObj.status_label; 
									document.getElementById("status_label_"+oid).innerHTML = myObj.status_label; 
$(".well_div_"+oid).css('background-color','');
document.getElementById("status_div_msg").innerHTML = myObj.msg; 

									setTimeout(function(){
										$("#right-menu").modal('hide'); 
										document.getElementById("status_div_msg").innerHTML ='';
									}, 2000);
								} 
							    }

                   xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam1));

}
function change_payment_type()
{ 
var oid=document.getElementById('order_id').value;
var payment_type=document.getElementById('payment_type_id').value;
document.getElementById("paid_msg").innerHTML ='';

const dbParam1={'mark_as_paid':'mark_as_paid','order_id':oid,'payment_type':payment_type};
//alert(JSON.stringify(dbParam1));
                              
							  const xmlhttp = new XMLHttpRequest();
								xmlhttp.onload = function() 
								{
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
									document.getElementById("payment_status_label_div").innerHTML = '<i class="fa fa-spin spinner"></i>';
					
									document.getElementById("payment_status_label_div").innerHTML = '<i class=" icon-ticket"></i> Paid by '+myObj.payment_type; 
									document.getElementById("payment_status_label_"+oid).innerHTML = myObj.payment_status_label; 
									document.getElementById("status_div_msg").innerHTML = myObj.msg; 
									
								
									document.getElementById("status_div_msg").innerHTML = myObj.msg; 

setTimeout(function(){
	$("#right-menu").modal('hide'); 
	document.getElementById("status_div_msg").innerHTML ='';
}, 2000);
								} 
							    }

                   xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam1));

}

function change_table()
{ 
var oid=document.getElementById('order_id').value;
var table_id=document.getElementById('table_id').value;
var fooder_id='<?php echo $fooder_id; ?>';

document.getElementById("paid_msg").innerHTML ='';
const dbParam1={'change_table':'change_table','order_id':oid,'table_id':table_id,'fooder_id':fooder_id};
//alert(JSON.stringify(dbParam1));
                              
							  const xmlhttp = new XMLHttpRequest();
								xmlhttp.onload = function() 
								{
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
									// document.getElementById("payment_status_label_div").innerHTML = '<i class="fa fa-spin spinner"></i>';
					
									// document.getElementById("payment_status_label_div").innerHTML = '<i class=" icon-ticket"></i> Paid by '+myObj.payment_type; 
									// document.getElementById("payment_status_label_"+oid).innerHTML = myObj.payment_status_label; 
									document.getElementById("table_number").innerHTML = myObj.table_number; 
									document.getElementById("table_number_"+oid).innerHTML = myObj.table_number; 
									document.getElementById("status_div_msg").innerHTML = myObj.msg; 
								
							

setTimeout(function(){
	//$("#right-menu").modal('hide'); 
	document.getElementById("status_div_msg").innerHTML ='';
}, 5000);
								} 
							    }

                   xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam1));

}

function change_dg()
{
var oid=document.getElementById('order_id').value;
var delivery_guy_id=document.getElementById('delivery_guy_id').value;


const dbParam1={'change_delivery_guy':'change_delivery_guy','order_id':oid,'delivery_guy_id':delivery_guy_id};
                              
							  const xmlhttp = new XMLHttpRequest();
								xmlhttp.onload = function() 
								{
								const myObj = JSON.parse(this.responseText); 
							
								if(myObj.error==false)
								{
									if(myObj.delivery_guy_name!=undefined){ 
					
									document.getElementById("delivery_guy_div").innerHTML = `Delivery Person<div class="row-fluid">
																<div class="span12 label label-large label-warning arrowed-in arrowed-right">
																	<b>`+myObj.delivery_guy_name+`</b>
																</div>
															</div>

															<div class="row-fluid">
																<ul class="unstyled spaced">
																	<li>
																	<i class="icon-caret-right green"></i>
																		Phone: <b class="red">`+myObj.delivery_guy_phone_number+`</b>		
																	</li>

																		

								

																	

																
																</ul>
															</div>`;
									
									
									
									}
									
								}else{
										document.getElementById("delivery_guy_div").innerHTML = ``;
									}  
							    }

                   xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
                   xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                   xmlhttp.send(JSON.stringify(dbParam1));

}



</script>

     


<?php 
if($query2ans=="add_offer" || $query2ans=="edit_offer"){
?>
<script>
$( document ).ready(function() {
 $(".amountPercent").keypress(function(e){
      var distype = $(".discountType:checked").val();
	  if(distype=='1'){
		  //console.log($(this).val()+"====="+this.value.length);
		var valueLength = this.value.length;
            if (valueLength=='2') {
                return false;
            }
            var kk = e.which;
            if (kk < 48 || kk > 57)
                e.preventDefault();
	  }else{
		var kk = e.which;
            if (kk < 48 || kk > 57)
                e.preventDefault();
	  }
 });
});
$( document ).ready(function() {
 $("#minOrderAmt").keypress(function(e){
	var kk = e.which;
            if (kk < 48 || kk > 57)
                e.preventDefault();
 });
});
</script>


<?php } ?>

<script>
var x = document.getElementById("show_let_long");
function getLocation() {
  if (navigator.geolocation) {

    navigator.geolocation.watchPosition(showPosition, showError);
	//navigator.geolocation.getCurrentPosition(showPosition, showError);
	
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position)
{
  x.innerHTML = "<h2>Latitude: " + position.coords.latitude +
  "<br>Longitude: " + position.coords.longitude+"</h2>";
var latitude=position.coords.latitude;
var longitude=position.coords.longitude;
 // alert("Latitude : " + latitude + " Longitude: -------" + longitude);
 // console.log("Latitude : " + latitude + " Longitude: " + longitude);
if(latitude!='' || longitude!='') 
{
	var fooder_id=<?php echo $fooder_id;?>
  
  const dbParam={'save_lat_long':'save_lat_long','fooder_id':fooder_id,'latitude':latitude,'longitude':longitude};
			  
		 const xmlhttp = new XMLHttpRequest();
			  xmlhttp.onload = function() {
		   const myObj = JSON.parse(this.responseText);
		   if(myObj.error==false)
		   {
		  	//x.innerHTML = "Latitude: " + latitude+"<br>Longitude: " + longitude;

			window.location="";
		   }
		   
		   
		 }
		 xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
		 xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		 xmlhttp.send(JSON.stringify(dbParam));
}else{
	x.innerHTML = "Allow location in browser!";
}



}

function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }
}
var gc = 0;
function fooderHeaderStatus(t,fid){
	      if($(t).prop('checked')==true){
			var stval = '<?php echo $feature->encrypt_decrypt('encrypt','1'); ?>';  
		  }else{
			var stval = '<?php echo $feature->encrypt_decrypt('encrypt','0'); ?>'; 
		  }
		  $.ajax({
		        type: 'POST',
		        url: '<?php echo $link->link('post',fooders);?>',
		        async: true, /* If set to non-async, browser shows page as "Loading.."*/
	            cache: false,
			    data: "changeFooderStatus="+stval+"&fid="+fid,
		        success: function (data) { 
					//console.log(data);
					if($.trim(data)=='success'){
					//$('#gritter-notice-wrapper').show();
		        	$('#gritter-notice-wrapper').html(`<div id="gritter-item-`+gc+`" class="gritter-item-wrapper gritter-success" style="">
		<div class="gritter-center"></div><div class="gritter-item">
		<div onclick="closeStatus(`+gc+`);" class="gritter-close" style="display: inline;"></div>
		<span class="gritter-title"><p><strong>Success ! </strong>Status Changed Successfully.</p></span>
		<div style="clear:both"></div></div>
		<div class="gritter-bottom"></div></div>`);
		gc++;
					}
		            }
		     });
}
function closeStatus(fid){
	//$('#gritter-notice-wrapper').hide();
	$('#gritter-item-'+fid).remove();
}
$(".gritter-close").click(function(){

	$(".gritter-item-wrapper").remove();
})

 
function closeNotification_IWCN(fid){ 
	//$('#gritter-notice-wrapper').hide();
	//alert('DGFDFGDFGDG');
	$('#gritter-item-'+fid).remove();
}

$(document).ready(function() {
   // $('.js-example-basic-single').select2();
});
function printDiv_order(id) {

var fooder_id='<?php echo $fooder_id; ?>';

	const dbParam1={'print_order':id,'fooder_id':fooder_id};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
									var html=myObj.html_print;

//console.log(html);

								//alert('success');
                                      //var divContents = document.getElementById("item_div_modal_pp").innerHTML;
									  var a = window.open('', '_blank', 'height=800, width=800');
									  a.document.open();
										a.document.write('<html>');
										  a.document.write('<body >');
										 a.document.write(html);
										//a.document.write('<html><body onload="window.print()">' + html + '</html>');
										//a.document.write(divContents);
										  a.document.write('</body></html>');
										a.document.close();
										a.print();
										a.close();  
										setTimeout(function(){a.close();},1);
								} 
							    } 

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));

 }
 function printDiv_kot(id) {

var fooder_id='<?php echo $fooder_id; ?>';

	const dbParam1={'print_kot':id,'fooder_id':fooder_id};
const xmlhttp = new XMLHttpRequest();
xmlhttp.onload = function() {
								const myObj = JSON.parse(this.responseText); 
						
								if(myObj.error==false)
								{
								 	var html=myObj.html_print; 
								// //alert('success');
                                //       //var divContents = document.getElementById("item_div_modal_pp").innerHTML;
								// 	  var a = window.open('', '_blank', 'height=800, width=800');
								// 	  a.document.open();
								// 		// a.document.write('<html>');
								// 		//   a.document.write('<body > <h1>Div contents are <br>');
								// 		//a.document.write(html);
								// 		a.document.write('<html><body onload="window.print()">' + html + '</html>');

								// 		//  a.document.write('</body></html>');
								// 		a.document.close();
								// 		a.print();
								// 		a.close(); 


								//var divToPrint=document.getElementById('DivIdToPrint');

var newWin=window.open('','Print-Window'); 

newWin.document.open();

newWin.document.write('<html><body onload="window.print()">'+html+'</body></html>'); 

newWin.document.close();

setTimeout(function(){newWin.close();},1); 


								
								} 
							    } 

				xmlhttp.open("POST", "<?php echo $link->link('post',fooders);?>");
				xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xmlhttp.send(JSON.stringify(dbParam1));

 }

</script>




<script src="https://alertify.live/notifier.js?data=dev_<?php echo $feature->encrypt_decrypt('encrypt',$fooder_id) ?>"></script> 


</body>  
</html> 
